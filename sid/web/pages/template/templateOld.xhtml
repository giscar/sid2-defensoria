<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      class="fixed" id="idHtml"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <title>SID</title>
        <link href="/sid/faces/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
        <link href="/sid/faces/bootstrap/css/sb-admin-2.css" rel="stylesheet" type="text/css"/>    
        <link href="/sid/faces/bootstrap/css/theme.min.css" rel="stylesheet" type="text/css"/>
        <link href="/sid/faces/bootstrap/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
        <link href="/sid/faces/bootstrap/css/bootstrap-datetimepicker.min.css" rel="stylesheet" type="text/css"/>
        <link href="/sid/faces/bootstrap/css/slider.min.css" rel="stylesheet" type="text/css"/>
        <link href="/sid/faces/jqueryui/css/jquery-ui.min.css" rel="stylesheet" type="text/css"/>
        <script src="/sid/faces/jqueryui/js/jquery-1.11.0.min.js" type="text/javascript"></script>
        <script src="/sid/faces/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
        <script src="/sid/faces/bootstrap/js/sb-admin-2.js"></script>
        <script src="/sid/faces/bootstrap/js/bootstrap-datetimepicker.min.js" type="text/javascript"></script>
        <script src="/sid/faces/bootstrap/js/bootstrap-slider.min.js" type="text/javascript"></script>
        <script src="/sid/faces/jqueryui/js/jquery.ui.core.js" type="text/javascript"></script>
        <script src="/sid/faces/jqueryui/js/jquery.ui.widget.js" type="text/javascript"></script>
        <script src="/sid/faces/jqueryui/js/jquery.ui.position.js" type="text/javascript"></script>
        <script src="/sid/faces/jqueryui/js/jquery.ui.menu.js" type="text/javascript"></script>
        <script src="/sid/faces/jqueryui/js/jquery.ui.autocomplete.js" type="text/javascript"></script>
        <link rel="stylesheet" href="/sid/faces/bootstrap/css/bootstrap-multiselect.css" type="text/css"/>
        <script type="text/javascript" src="/sid/faces/bootstrap/js/bootstrap-multiselect.js"></script>
        <script type="text/javascript" src="/sid/faces/bootstrap/js/bootstrap-multiselect-collapsible-groups.js"></script>
        <script src="/sid/faces/bootstrap/js/raphael-min.js"></script>
        <script src="/sid/faces/bootstrap/js/morris.min.js"></script>
        <link rel="stylesheet" href="/sid/faces/bootstrap/css/morris.css"/>
    </h:head>

    <style>
        .error{
            background: #F2DEDE;
        }
        a:hover {
            cursor: pointer
        }
        .disabled-form{
            background: #EEEEEE; pointer-events:none;
        }
    </style>
    <body>
        <style>
            body{
                font-size: 0.9em;
            }
        </style>
        <div class="modal fade" id="idAlerta">
            <div class="modal-dialog modal-sm" >
                <div class="modal-content" style=" background: #FCF8E3">
                    <div class="modal-header" style="padding: 5px;">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span style="color: black; font-size: large" ></span></button>
                        <h4 style="color: #8A6D3B"><b>Alerta!</b></h4>
                    </div>
                    <div style="background: white;box-sizing: border-box;" >
                        <div class="modal-body" style="padding: 7px;">
                            <table style="width: 100%">
                                <tr>
                                    <td style="padding-right: 8px">
                                        <img style="width: 30px" src="/sid/faces/bootstrap/img/warning.png" />
                                    </td>
                                    <td>
                                        <b><div id="mensaje" style="font-size: 1.2em" class="text-resalt-comun"></div></b>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--Info-->
        <div class="modal fade" id="idInfo">
            <div class="modal-dialog modal-sm" >
                <div class="modal-content" style=" background: #D9EDF7">
                    <div class="modal-header" style="padding: 5px;">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span style="color: black; font-size: large" ></span></button>
                        <h4 style="color: #3170A5"><b>Info</b></h4>
                    </div>
                    <div style="background: white;box-sizing: border-box;" >
                        <div class="modal-body" style="padding: 7px;">
                            <table style="width: 100%">
                                <tr>
                                    <td style="padding-right: 8px">
                                        <img style="width: 30px" src="/sid/faces/bootstrap/img/info.png" />
                                    </td>
                                    <td>
                                        <div id="mensajeInfo" style="font-size: 1.2em" class="text-resalt-comun"></div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Mensajes -->
        <div class="modal fade" id="idMensaje">
            <div class="modal-dialog modal-sm">
                <div class="modal-content" style=" background: #FCF8E3">
                    <div class="modal-header" style="padding: 5px;">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span style="color: black; font-size: large" ></span></button>
                        <h4 style="color: #8A6D3B"><b>Alerta</b></h4>
                    </div>
                    <div style="background: white;box-sizing: border-box;" >
                        <div class="modal-body" style="padding: 7px;">
                            <table style="width: 100%">
                                <tr>
                                    <td style="padding-right: 8px">
                                        <img style="width: 30px" src="/sid/faces/bootstrap/img/warning.png" />
                                    </td>
                                    <td>
                                        <div class="mensaje" style="color: #878787"></div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            $(document).ready(function () {
                $('[data-toggle="tooltip"]').tooltip();
            });
            
            function alertar(msg) {
                $("#idAlerta").modal('show');
                $("#mensaje").html(msg);
            }

            function info(msg) {
                $("#idInfo").modal('show');
                $("#mensajeInfo").html(msg);
            }

            function confirmar() {
                $(".confirmacion").modal('show');
            }

        </script>
        <h:form id="formId">
            <header class="header">
                <table style="width: 100%">
                    <tr>
                        <td style="width: 16%">
                            <table>
                                <tr>
                                    <td>
                                        <a class="logo" jsf:action="#{menuController.inicio()}">
                                            <img src="/sid/faces/bootstrap/img/logo.png" height="30" alt="sid" />
                                        </a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p>( Sistema de Información Defensorial )</p>
                                    </td>
                                </tr>
                            </table>
                        </td>
                        <td  style="width: 38%">
                            <table style="width: 100%">
                                <tr>
                                    <td style="width: 22%">
                                        <h:selectOneMenu value="#{busquedaController.expediente.anhoBusqueda}">
                                            <f:selectItem itemLabel="Seleccione" itemValue="" />
                                            <f:selectItem itemLabel="2015" itemValue="2015" />
                                            <f:selectItem itemLabel="2016" itemValue="2016" />
                                            <f:selectItem itemLabel="2017" itemValue="2017" />
                                        </h:selectOneMenu>
                                    </td>
                                    <td>
                                        <h:selectOneMenu value="#{busquedaController.expediente.ODBusqueda}">
                                            <f:selectItem itemLabel="Seleccione" itemValue="" />
                                            <f:selectItems value="#{listasComunesController.buscarListaADOD(false,false,false)}" var="y" itemLabel="#{y.nombreParametro}" itemValue="#{y.valorParametro}" />
                                        </h:selectOneMenu>
                                    </td>
                                    <td>
                                        <div class="content">
                                            <div id="idDivRegistro" class="form-group has-feedback" style="width: 100%">
                                                <input type="text" jsf:value="#{busquedaController.expediente.observacion}" class="form-control input-sm"  placeholder="Buscar"/>
                                                <a style="margin: auto" jsf:action="#{busquedaController.listarExpedientesPaginado(1)}" >
                                                    <span style="font-size: medium; top: 0px" class="glyphicon glyphicon-search form-control-feedback"/>
                                                </a>
                                            </div>

                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </td>
                        <td>
                            <div class="header-right">							
                                <ul class="notifications">
                                    <li>
                                        <a href="#" class="dropdown-toggle notification-icon" data-toggle="dropdown">
                                            <i class="fa fa-bell"></i>
                                            <span class="badge">#{bandejaController.nroMensajesInternos}</span>
                                        </a>
                                        <div class="dropdown-menu notification-menu">
                                            <div class="notification-title">
                                                Mensajes
                                            </div>

                                            <div class="content">
                                                <ul>
                                                    <span>Tiene #{bandejaController.nroMensajesInternos} mensajes</span>  
                                                </ul>
                                                <hr />

                                                <div class="text-right">
                                                    <a jsf:action="#{bandejaController.cargarTotalInternos(1)}" class="view-more"><i class="fa fa-arrow-right"></i> ir a la bandeja</a>
                                                </div>
                                            </div>
                                        </div>                            

                                    </li>
                                    <li>
                                        <a href="#" class="dropdown-toggle notification-icon"  data-toggle="dropdown">
                                            <i class="fa fa-rss"></i>
                                            <span class="badge">#{bandejaController.nroMensajesAutomaticos}</span>
                                        </a> 
                                        <div class="dropdown-menu notification-menu">
                                            <div class="notification-title">
                                                Mensajes
                                            </div>

                                            <div class="content">
                                                <ul>
                                                    <span>Tiene #{bandejaController.nroMensajesAutomaticos} mensajes</span>  
                                                </ul>
                                                <hr />

                                                <div class="text-right">
                                                    <a jsf:action="#{bandejaController.cargarTotalAutomaticos(1)}" class="view-more"><i class="fa fa-arrow-right"></i> ir a la bandeja</a>
                                                </div>
                                            </div>
                                        </div> 
                                    </li>
                                    <li>
                                        <a href="#" class="dropdown-toggle notification-icon"  data-toggle="dropdown">
                                            <i class="fa fa-cog fa-fw"></i>
                                            <span class="badge">#{bandejaController.nroMensajesProgramados}</span>
                                        </a> 
                                        <div class="dropdown-menu notification-menu">
                                            <div class="notification-title">
                                                Mensajes
                                            </div>

                                            <div class="content">
                                                <ul>
                                                    <span>Tiene #{bandejaController.nroMensajesProgramados} mensajes</span>  
                                                </ul>
                                                <hr />

                                                <div class="text-right">
                                                    <a jsf:action="#{bandejaController.cargarTotalProgramados(1)}" class="view-more"><i class="fa fa-arrow-right"></i> ir a la bandeja</a>
                                                </div>
                                            </div>
                                        </div> 
                                    </li>
                                </ul>

                                <span class="separator" style="margin-left: 0px; margin-right: 0px"></span>

                                <div id="userbox" class="userbox">
                                    <a href="#" data-toggle="dropdown">
                                        <figure class="profile-picture">
                                            <img src="/sid/DownloadFileServlet?fileName=#{loginController.usuarioSesion.ruta == null? '/sid/faces/bootstrap/img/user-admin.png' : loginController.usuarioSesion.ruta}" alt="#{loginController.usuarioSesion.nombre} &#160; #{loginController.usuarioSesion.apellidoPaterno} &#160; #{loginController.usuarioSesion.apellidoMaterno}" class="img-circle" data-lock-picture="images/!logged-user.jpg" />
                                        </figure>
                                        <div class="profile-info">
                                            <span >#{loginController.usuarioSesion.nombre} &#160; #{loginController.usuarioSesion.apellidoPaterno} &#160; #{loginController.usuarioSesion.apellidoMaterno}</span>
                                            <span class="role">#{loginController.usuarioSesion.cargo}</span>
                                        </div>

                                        <i class="fa custom-caret"></i>
                                    </a>

                                    <div class="dropdown-menu">
                                        <ul class="list-unstyled">
                                            <li class="divider"></li>
                                            <li>
                                                <a role="menuitem" tabindex="-1" jsf:actionListener="#{usuarioDetalleController.verDetallePerfil()}" jsf:action="perfil"><i class="fa fa-user"></i> Mi perfil</a>
                                            </li>
                                            <li>
                                                <a href="/sid/cerrarSesion" role="menuitem" tabindex="-1" ><i class="fa fa-power-off"></i> Cerrar sesion</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                </table>
            </header>
            <script>
                $(document).ready(function(){
                    $('.selectRadio').multiselect({
                        buttonWidth: '350px';
                    });
                var stateMenu;
                var i = 0;
                stateMenu = sessionStorage.getItem('stateMenu');
                if (stateMenu === '0') {
                    $('#idHtml').removeClass("sidebar-left-collapsed");
                }

                if (stateMenu === '1') {
                    $('#idHtml').addClass("sidebar-left-collapsed");
                }

                if (stateMenu !== null) {
                    if (stateMenu === '0') {
                        i = 0;
                    }
                    if (stateMenu === '1') {
                        i = 1;
                    }
                }
                    $('#idDivOcultarMenu').click(function () {
                    if (i === 0) {
                        $('#idHtml').addClass("sidebar-left-collapsed");
                        i = 1;
                    }
                    else {
                        $('#idHtml').removeClass("sidebar-left-collapsed");
                        i = 0;
                    }
                    sessionStorage.setItem('stateMenu', i);
                });
                });
            </script>
            <aside id="sidebar-left" class="sidebar-left" style="max-width: 20%">
                <div class="sidebar-header">
                    <div class="sidebar-title">
                        MENU
                    </div>
                    <div class="sidebar-toggle" id="idDivOcultarMenu" >
                        <i class="fa fa-bars" aria-label="Toggle sidebar"></i>
                    </div>
                    <!--<div class="sidebar-toggle" >CCC
                        <i class="fa fa-bars" aria-label="Toggle sidebar"></i>
                    </div>-->
                    
                </div>
                <div class="nano" >
                    <div class="nano-content">
                        <nav id="menu" class="nav-main" >
                            <ul class="nav nav-main">
                                <c:forEach var="x" items="#{menuController.menuPadre}" >
                                    <li>
                                        <a jsf:action="#{menuController.cargarPagina(x.id)}">
                                            <i class="#{x.clase}" aria-hidden="true" ></i>
                                            <span style="width: 100px">#{x.descripcion}</span>
                                        </a>
                                    </li>
                                </c:forEach>
                            </ul>
                        </nav>
                    </div>
                </div>
                <!--<div style="text-align: right; height:70%; vertical-align: bottom"> 
                    <table style="height: 100%">
                        <tr>
                            <td style="height: 100%; vertical-align: bottom">
                                <div><img alt="" src="/sid/faces/bootstrap/img/giz.png" width="50%" style="vertical-align: bottom; position: static"/></div>
                            </td>
                        </tr>
                    </table>
    
</div>-->
            </aside>
            
   <style>
            .site-footer {
    background: #ECEDF0 none repeat scroll 0 0;
    border-top: 1px solid #ABB4BE;
    bottom: 0;
    left: 0;
    line-height: 1;
    position: fixed;
    white-space: nowrap;
    z-index: 10;
    width: 100%;
    padding-right: 10px;    
    padding-bottom : 10px;    
    padding-top: 10px;    
}
        </style>         
        </h:form>
        <!-- /.navbar-static-side -->

        <section role="main" class="content-body">
            <header class="page-header" style="left : 73px">
                <h:form>
                    <input type="hidden"  class="idCaso" />

                    <table width="100%">
                        <tr>
                            <td style="width: 17%"></td>
                            <td><h2 style="text-decoration: none; display: #{menuController.menuHijo.size() == 3? '':'none'}">
                                    <span style="font-weight: bold; font-size: 0.8em" class="idNombreCaso"></span>
                                </h2>
                                <div class="right-wrapper pull-right">
                                    <ol class="breadcrumbs">
                                        <c:forEach var="y" items="#{menuController.menuHijo}" >
                                            <li>
                                                <h:commandLink action="#{menuController.cargarPagina(y.id)}">
                                                    <span class="menuHijo">#{y.descripcion}</span>
                                                </h:commandLink>
                                            </li>
                                        </c:forEach>
                                    </ol>
                                </div>
                            </td>
                        </tr>
                    </table>


                    <script>
                        $(document).ready(function () {
                            $(".idCaso").val(sessionStorage.getItem("idCaso"));

                            $(".menuHijo").each(function () {
                                if ($(this).text() === sessionStorage.getItem("menuHijoSession")) {
                                    $(this).css("font-weight", "bold").css("font-size", "1.5em");
                                } else {
                                    $(this).css("font-weight", "normal").css("font-size", "1em");
                                }
                            });

                            $(".idNombreCaso").html(sessionStorage.getItem("nombreCaso"));
                            if ($(".idNombreCaso").text().length > 41) {
                                $(".idNombreCaso").text($(".idNombreCaso").text().slice(0, 40) + '...');
                            }
                            $('.idNombreCaso').mousemove(function () {
                                $('.idNombreCaso').tooltip({
                                    placement: 'bottom',
                                    title: sessionStorage.getItem("nombreCaso")
                                });
                            });
                        });
                    </script>
                </h:form>

            </header>
            <br/>
            <h:form>

                <div style="left: 0px; display: #{menuController.menuNieto.size() > 0? 'inherit;': 'none;'} top: 110px" class="page-header">

                    <div class="right-wrapper pull-right">
                        <ol class="breadcrumbs">
                            <c:forEach var="y" items="#{menuController.menuNieto}" >
                                <li >
                                    <a style="text-decoration: none; color: silver" jsf:action="#{menuController.cargarPagina(y.id)}">
                                        <i aria-hidden="true"></i>
                                        <span class="menuNieto">#{y.descripcion}</span>
                                    </a>
                                </li>
                            </c:forEach>
                        </ol>
                    </div>
                    <input type="hidden" value="#{menuController.menuNieto.size()}" id="idInputNieto"/>
                    <script>
                        $(document).ready(function () {
                            $(".menuNieto").each(function () {
                                if ($(this).text() === sessionStorage.getItem("menuNietoSession")) {
                                    $(this).css("font-weight", "bold").css("font-size", "1.5em");
                                } else {
                                    $(this).css("font-weight", "normal").css("font-size", "1em");
                                }
                            });
                            if ($("#idInputNieto").val() === '0') {
                                $('.idPanelBody').css('padding-top', '10px');
                            } else {
                                $('.idPanelBody').css('padding-top', '80px');
                            }

                        });
                    </script>

                </div>
            </h:form>
            
            <br/><br/><br/><br/><br/>
            <div class="row">
                <div>
                    <div class="panel-body idPanelBody" >
                        <h:messages />
                        <ui:insert name="content">
                        </ui:insert> 
                    </div>                
                </div>
            </div>
        </section>
        <script>

            this.$('.js-loading-bar').modal({
                backdrop: 'static',
                show: false
            });

            function closeModal(data) {
                if (data.status === 'success') {
                    $("#loadModal").modal('hide');
                    $('body').removeClass('modal-open');
                    $(".modal-backdrop").removeClass("modal-backdrop");
                }
            }

            function closeModalInfo(data) {
                if (data.status === 'success') {
                    $("#loadModal").modal('hide');
                    $('body').removeClass('modal-open');
                    $(".modal-backdrop").removeClass("modal-backdrop");
                    info("Se han realizado los cambios correctamente");
                }
            }

            function loadingModal() {
                $("#loadModal").modal('show');
            }

            function soloNumbero(e)
            {
                var keynum = window.event ? window.event.keyCode : e.which;
                if ((keynum === 8) || (keynum === 46))
                    return true;

                return /\d/.test(String.fromCharCode(keynum));
            }

            $('.datepicker').datetimepicker({
                pickTime: false
            });
            $(".datepicker").on("changeDate", function (ev) {
                $(this).datetimepicker("hide");
            });

            $('.timepicker').datetimepicker({
                pickDate: false
            });
        </script>

        <script language="javascript">
            // añadimos una función de callback que será invocada 
            // cuando se produzca el evento de sesión caducada
            function error() {
                // obtenemos el componente que implementa la ventana modal para mostrarlo     
                //alert('Sesion ha expirado');

                window.location = '#{facesContext.externalContext.requestContextPath}/cerrarSesion.jsp';
            }
        </script>        
        
        
    </body>
</html>