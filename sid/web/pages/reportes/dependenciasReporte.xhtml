<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:h="http://xmlns.jcp.org/jsf/html" 
      xmlns:f="http://xmlns.jcp.org/jsf/core" 
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
      xmlns:jsf="http://xmlns.jcp.org/jsf" 
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:gc="http://xmlns.jcp.org/jsf/composite/gc">
    <ui:composition template="../template/template.xhtml">
        <ui:define name="content">
            <h:form id="idForm11" class="form-horizontal">
                <div class="panel panel-primary">
                    <div class="panel-body">
                        <ul class="nav nav-tabs" role="tablist">
                            <li role="presentation">
                                <a aria-controls="home" role="tab" data-toggle="tab" jsf:action="#{reporteSidController.cargarPaginaExpedienteReporte()}">
                                    <span class="text-resalt-comun"/>Reporte de expedientes
                                </a>
                            </li>
                            <li role="presentation">
                                <a aria-controls="profile" role="tab" data-toggle="tab" jsf:action="#{reporteSidController.cargarPaginaGestionReporte()}">
                                    <span class="text-resalt-comun"/>Reporte de gestiones
                                </a>
                            </li>
                            <li role="presentation">
                                <a aria-controls="profile" role="tab" data-toggle="tab" jsf:action="#{reporteSidController.cargarPaginaEntidadReporte()}">
                                    <span class="text-resalt-comun"/>Reporte de entidades
                                </a>
                            </li>
                            <li role="presentation">
                                <a aria-controls="profile" role="tab" data-toggle="tab" jsf:action="#{reporteSidController.cargarPaginaTematicaReporte()}">
                                    <span class="text-resalt-comun"/>Reporte de tematicas
                                </a>
                            </li>
                            <li role="presentation">
                                <a aria-controls="profile" role="tab" data-toggle="tab" jsf:action="#{reporteSidController.cargarPaginaComisionadoReporte()}">
                                    <span class="text-resalt-comun"/>Reporte de comisionados
                                </a>
                            </li>
                            <li role="presentation"  class="active">
                                <a aria-controls="profile" role="tab" data-toggle="tab" jsf:action="#{reporteSidController.cargarPaginaDependenciaReporte()}">
                                    <span class="text-resalt-comun"/>Reporte de dependencias
                                </a>
                            </li>
                            <li role="presentation">
                                <a aria-controls="profile" role="tab" data-toggle="tab" jsf:action="#{reporteSidController.cargarPaginaGestionInternaReporte()}">
                                    <span class="text-resalt-comun"/>Reporte de gestiones internas
                                </a>
                            </li>
                        </ul>
                        <div role="tabpanel" >
                            <div class="tab-content">
                                <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                                    <div class="panel panel-default">
                                        <div class="panel-heading" role="tab" id="headingOne">
                                            <h4 class="panel-title">
                                                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true"  aria-controls="collapseOne">
                                                    Datos del expediente
                                                </a>
                                            </h4>
                                        </div>
                                        <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
                                            <div class="panel-body">
                                                <table style="width: 100%">
                                                    <tr>
                                                        <td style="width: 50%; padding-right: 5px; padding-bottom: 10px">
                                                            <table style="width: 100%">
                                                                <tr>
                                                                    <td>
                                                                        <label>Fecha de ingreso desde</label>
                                                                        <gc:calendar value="#{reporteSidController.reporteSidExpediente.fechaIngresoDesde}" />
                                                                    </td>
                                                                    <td>
                                                                        <label>Fecha de ingreso hasta</label>
                                                                        <gc:calendar value="#{reporteSidController.reporteSidExpediente.fechaIngresoHasta}" />
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                        </td>
                                                        <td style="padding-left: 5px; padding-bottom: 10px">
                                                            <table style="width: 100%">
                                                                <tr>
                                                                    <td>
                                                                        <label>Fecha de conclusión desde</label>
                                                                        <gc:calendar value="#{reporteSidController.reporteSidExpediente.fechaConclusionDesde}" />
                                                                    </td>
                                                                    <td>
                                                                        <label>Fecha de conclusión hasta</label>
                                                                        <gc:calendar value="#{reporteSidController.reporteSidExpediente.fechaConclusionHasta}" />
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td style="padding-right: 5px; padding-bottom: 10px">
                                                            <label>Tipo de expediente</label>
                                                            <h:selectOneMenu value="#{reporteSidController.reporteSidExpediente.tipoExpediente}">
                                                                <f:selectItem itemLabel="Seleccione" />
                                                                <f:selectItems value="#{listasComunesController.buscarExpedienteTipoClasificacion(false,false,false)}" var="y" itemLabel="#{y.nombreParametro}" itemValue="#{y.valorParametro}" />
                                                            </h:selectOneMenu>
                                                        </td>
                                                        <td style="padding-left: 5px; padding-bottom: 10px">
                                                            <label>Entidad</label>
                                                            <table style="width: 100%">
                                                                <tr>
                                                                    <td>
                                                                        <input type="text" jsf:value="#{reporteSidController.reporteSidExpediente.nombreEntidad}" readonly="true"/>
                                                                        <h:inputHidden value="#{reporteSidController.reporteSidExpediente.codigoEntidad}" />
                                                                    </td>
                                                                    <td>
                                                                        <a style="vertical-align: bottom" jsf:action="#{reporteSidController.limpiaListasReporte()}" jsf:onclick="loadingModal()" >
                                                                            <span style="color: #3183B9; font-size: large;" class="glyphicon glyphicon-search"></span>
                                                                            <f:ajax render=":idForm11:idPanelModalEntidad11" onevent="openModalBusquedaEntidad()"/>
                                                                        </a>
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                            <div class="modal fade" tabindex="-1" role="dialog" id="idModalBusquedaEntidad11">
                                                                <div class="modal-dialog" role="document">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                                <span aria-hidden="true" class="glyphicon glyphicon-remove" style="color: red"/>
                                                                            </button>
                                                                            <span class="modal-title text-resalt-primary">Búsqueda de Entidades</span>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <h:panelGroup id="idPanelModalEntidad11">
                                                                                <div class="form-group has-feedback" style="width:100%;margin:auto">
                                                                                    <table style="width: 100%">
                                                                                        <tr>
                                                                                            <td style="width: 80%">
                                                                                                <input type="text" jsf:value="#{reporteSidController.entidadReporte.nombre}"  placeholder="Ingrese nombre de la Entidad" />
                                                                                            </td>
                                                                                            <td>
                                                                                                <a style="vertical-align: bottom" jsf:action="#{reporteSidController.cargarPopoverEntidad(1)}" jsf:onclick="loadingModal()">
                                                                                                    <span style="color: #3183B9; font-size: large;" class="glyphicon glyphicon-search"></span>
                                                                                                    <f:ajax execute="@form" render=":idForm11:idPanelModalEntidad11" onevent="closeModal"/>
                                                                                                </a>
                                                                                            </td>
                                                                                        </tr>
                                                                                    </table>
                                                                                </div>
                                                                                <br/>
                                                                                <h:dataTable  var="item" value="#{reporteSidController.entidadPopover}" class="table table-striped" style="font-size:small" binding="#{row38}">
                                                                                    <h:column>
                                                                                        <f:facet name="header">N.°</f:facet>
                                                                                        <h:outputText value="#{(reporteSidController.nroPaginaEntidad-1)*10+row38.rowIndex+1}" />
                                                                                    </h:column>
                                                                                    <h:column>
                                                                                        <f:facet name="header">Nombre</f:facet>
                                                                                        <h:outputText value="#{item.nombre}" />
                                                                                    </h:column>
                                                                                    <h:column>
                                                                                        <f:facet name="header">RUC</f:facet>
                                                                                        <h:outputText value="#{item.nombreDepartamento}" />
                                                                                    </h:column>
                                                                                    <h:column>
                                                                                        <f:facet name="header">Acciones</f:facet>
                                                                                        <a class="btn btn-warning" jsf:action="#{reporteSidController.setearEntidad(item)}" >
                                                                                            <span class="glyphicon glyphicon-pencil" />
                                                                                        </a>
                                                                                    </h:column>
                                                                                </h:dataTable>
                                                                                <ul class="pager">
                                                                                    <li>
                                                                                        <a jsf:rendered="#{reporteSidController.entidadPopover.size() > 0}" jsf:action="#{reporteSidController.cargarPopoverEntidad(reporteSidController.nroPaginaEntidad -1)}">Anterior
                                                                                            <f:ajax render="idPanelModalEntidad11" />
                                                                                        </a>
                                                                                    </li>
                                                                                    <li>
                                                                                        <a jsf:rendered="#{reporteSidController.entidadPopover.size() > 0}" jsf:action="#{reporteSidController.cargarPopoverEntidad(reporteSidController.nroPaginaEntidad +1)}">Siguiente
                                                                                            <f:ajax render="idPanelModalEntidad11" />
                                                                                        </a>
                                                                                    </li>
                                                                                </ul>
                                                                            </h:panelGroup>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <script>
                                                                function openModalBusquedaActor() {
                                                                    $("#idModalBusquedaEntidad11").modal('show');
                                                                }
                                                            </script>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td style="padding-right: 5px; padding-bottom: 10px">
                                                            <label>Región de la entidad quejada</label>
                                                            <h:panelGroup>
                                                                <table style="width:100%">
                                                                    <tr>
                                                                        <td style="width:33%">
                                                                            <h:selectOneMenu value="#{reporteSidController.reporteSidExpediente.idDepartamentoEntidad}" onchange="loadingModal()">
                                                                                <f:selectItem itemLabel="Departamento" itemValue=""/>
                                                                                <f:selectItems value="#{listasComunesController.listaDepartamentos(false,false,false)}" var="y" itemLabel="#{y.nombreParametro}" itemValue="#{y.valorParametro}" />
                                                                            </h:selectOneMenu>
                                                                        </td>
                                                                        <td style="width:33%">
                                                                        </td>
                                                                        <td style="width:34%">
                                                                        </td>
                                                                    </tr>
                                                                </table>
                                                            </h:panelGroup>
                                                        </td>
                                                        <td style="padding-left: 5px; padding-bottom: 10px">
                                                            <label>Canal de ingreso:</label>
                                                            <h:selectOneMenu value="#{reporteSidController.reporteSidExpediente.canalIngreso}">
                                                                <f:selectItem itemValue="" itemLabel="Seleccione" />
                                                                <f:selectItems value="#{listasComunesController.buscarExpedienteTipoIngreso(false,false,false)}" var="y" itemLabel="#{y.nombreParametro}" itemValue="#{y.valorParametro}" />
                                                            </h:selectOneMenu>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td style="padding-right: 5px; padding-bottom: 10px">
                                                            
                                                        </td>
                                                        <td style="padding-left: 5px; padding-bottom: 10px">
                                                            <label>Comisionado</label>
                                                            <table style="width: 100%">
                                                                <tr>
                                                                    <td>
                                                                        <input type="text" jsf:value="#{reporteSidController.reporteSidExpediente.usuarioNombre}" readonly="true"/>
                                                                        <h:inputHidden value="#{reporteSidController.reporteSidExpediente.usuarioCodigo}" />
                                                                    </td>
                                                                    <td>
                                                                        <a style="vertical-align: bottom" jsf:action="#{reporteSidController.limpiarComisionado()}" jsf:onclick="loadingModal()" >
                                                                            <span style="color: #3183B9; font-size: large;" class="glyphicon glyphicon-search"></span>
                                                                            <f:ajax render=":idForm11:idPanelCompartir11" onevent="modalAsignar()"/>
                                                                        </a>
                                                                        <div class="modal fade" data-backdrop="static" data-keyboard="false" id="idModalCompartir11" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                                                            <div class="modal-dialog" style="text-align: left">
                                                                                <div class="modal-content">
                                                                                    <div class="modal-header">
                                                                                        <a type="button" class="close" data-dismiss="modal">
                                                                                            <span style="color:red" class="glyphicon glyphicon-remove"></span>
                                                                                        </a>
                                                                                    </div>
                                                                                    <div class="modal-body" style="padding:5px">
                                                                                        <h:panelGroup id="idPanelCompartir11">
                                                                                            <span class="text-bold">Seleccione Comisionado:</span>
                                                                                            <h:selectOneMenu value="#{reporteSidController.usuarioPalabra}">
                                                                                                <f:selectItems value="#{reporteSidController.listaUsuarioOD}" var="item" itemLabel="#{item.nombre} #{item.apellidoPaterno} #{item.apellidoMaterno}" itemValue="#{item.codigo}" />
                                                                                            </h:selectOneMenu>
                                                                                            <div class="modal-footer">
                                                                                                <h:commandLink class="btn btn-primary" action="#{reporteSidController.seleccionarUsuarioComisionado()}">
                                                                                                    <span class="glyphicon glyphicon-floppy-disk"/>Seleccionar
                                                                                                </h:commandLink>
                                                                                            </div>
                                                                                        </h:panelGroup>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <script>
                                                                            function modalAsignar() {
                                                                                $("#idModalCompartir11").modal('show');
                                                                            }
                                                                        </script>
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="2">
                                                            <a class="btn btn-primary" jsf:action="#{reporteSidController.buscarReporteExpedienteDependencia(1)}" >
                                                                <span class="glyphicon glyphicon-search" />Buscar
                                                            </a>
                                                            &#160;&#160;&#160;
                                                            <a class="btn btn-warning" jsf:action="#{reporteSidController.cargarPaginaDependenciaReporte()}" >
                                                                <span class="glyphicon glyphicon-asterisk" />Limpiar
                                                            </a>
                                                        </td>
                                                    </tr>
                                                        
                                                    </table>
                                            </div>
                                        </div>
                                    </div>
                                    
                                </div>
                                <br/>
                                <div>
                                    <h:panelGroup rendered="#{reporteSidController.listaReporteSidDependencia.size() > 0}">
                                    <a jsf:action="#{reporteSidController.reporteDependenciaExcel()}">
                                        <img src="../../bootstrap/img/excel.png" height="45" width="45"/>
                                    </a>
                                    <a jsf:action="#{reporteSidController.reporteDependenciaPdf()}">
                                        <img src="../../bootstrap/img/pdf.png" height="45" width="45"/>
                                    </a>
                                        </h:panelGroup>
                                </div>
                                
                                <h:panelGroup id="idPanelBusquedaExpediente11">
                                    <h:dataTable value="#{reporteSidController.listaReporteSidDependencia}" var="exped" class="table table-hover" binding="#{row39}" width="100%">
                                        <h:column>
                                            <f:facet name="header">Nro</f:facet>
                                            <h:outputText value="#{(row39.rowIndex+1)+(reporteSidController.pagina-1)*10}" />
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">Dependencia</f:facet>
                                            <h:outputText value="#{exped.nombreAdjuntia}" />
                                        </h:column>
                                        
                                        <h:column>
                                            <f:facet name="header">Total Expedientes</f:facet>
                                            <h:outputText value="#{exped.totalExpediente}" />
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">Total quejas</f:facet>
                                            <h:outputText value="#{exped.totalExpedienteQueja}" />
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">Total quejas concluidas</f:facet>
                                            <h:outputText value="#{exped.totalExpedienteQuejaConcluido}"/>
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">Total quejas en tramite</f:facet>
                                            <h:outputText value="#{exped.totalExpedienteQuejaTramite}" />
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">Total consultas</f:facet>
                                            <h:outputText value="#{exped.totalExpedienteConsulta}" />
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">Total consultas concluidas</f:facet>
                                            <h:outputText value="#{exped.totalExpedienteConsultaConcluido}" />
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">Total consultas en tramite</f:facet>
                                            <h:outputText value="#{exped.totalExpedienteConsultaTramite}" />
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">Total petitorios</f:facet>
                                            <h:outputText value="#{exped.totalExpedientePetitorio}" />
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">Total petitorios concluidos</f:facet>
                                            <h:outputText value="#{exped.totalExpedientePetitorioConcluido}" />
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">Total petitorios en tramite</f:facet>
                                            <h:outputText value="#{exped.totalExpedientePetitorioTramite}" />
                                        </h:column>
                                    </h:dataTable>
                                    <ul class="pager">
                                        <li>
                                            <a jsf:action="#{reporteSidController.buscarReporteExpedienteDependencia(reporteSidController.pagina -1)}" jsf:rendered="#{!empty reporteSidController.listaReporteSidDependencia}" jsf:onclick="loadingModal()">Anterior
                                                <f:ajax render="idPanelBusquedaExpediente11" onevent="closeModal"/>
                                            </a>
                                        </li>
                                        <li>
                                            <a jsf:action="#{reporteSidController.buscarReporteExpedienteDependencia(reporteSidController.pagina +1)}" jsf:rendered="#{!empty reporteSidController.listaReporteSidDependencia}" jsf:onclick="loadingModal()">Siguiente
                                                <f:ajax render="idPanelBusquedaExpediente11" onevent="closeModal"/>
                                            </a>
                                        </li>
                                    </ul>
                                    <script>
                                        $('[data-toggle="tooltip"]').tooltip();
                                    </script>
                                </h:panelGroup>
                            </div>
                        </div>
                        <script>
                            function openModalBusquedaEntidad() {
                                $("#idModalBusquedaEntidad11").modal('show');
                            }
                        </script>
                    </div>
                </div>
            </h:form>
        </ui:define>
    </ui:composition>
</html>